-- MySQL Script generated by MySQL Workbench
-- Mon Oct  2 00:32:57 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

-- -----------------------------------------------------
-- Schema mymead
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mymead` ;

-- -----------------------------------------------------
-- Schema mymead
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mymead` DEFAULT CHARACTER SET utf8 ;
USE `mymead` ;

-- -----------------------------------------------------
-- Table `mymead`.`brewmaster`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mymead`.`brewmaster` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `firstname` VARCHAR(45) NOT NULL,
  `lastname` VARCHAR(45) NOT NULL,
  `username` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mymead`.`storagelocation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mymead`.`storagelocation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `location` VARCHAR(155) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mymead`.`mead`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mymead`.`mead` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `created` DATE NOT NULL,
  `name` VARCHAR(45) NULL,
  `comments` VARCHAR(1000) NULL,
  `brewmasterid` INT NOT NULL,
  `casted` TINYINT NOT NULL,
  `storagelocation_id` INT NOT NULL,
  PRIMARY KEY (`id`, `brewmasterid`, `storagelocation_id`),
  INDEX `fk_mead_brewmaster1_idx` (`brewmasterid` ASC),
  INDEX `fk_mead_storagelocation1_idx` (`storagelocation_id` ASC),
  CONSTRAINT `fk_mead_brewmaster1`
    FOREIGN KEY (`brewmasterid`)
    REFERENCES `mymead`.`brewmaster` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_mead_storagelocation1`
    FOREIGN KEY (`storagelocation_id`)
    REFERENCES `mymead`.`storagelocation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mymead`.`ingredients`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mymead`.`ingredients` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `quantity` FLOAT NULL,
  `description` VARCHAR(155) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mymead`.`meadingredientsmap`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mymead`.`meadingredientsmap` (
  `mead_id` INT NOT NULL,
  `mead_brewmasterid` INT NOT NULL,
  `ingredients_id` INT NOT NULL,
  PRIMARY KEY (`mead_id`, `mead_brewmasterid`, `ingredients_id`),
  INDEX `fk_mead_has_ingredients_ingredients1_idx` (`ingredients_id` ASC),
  INDEX `fk_mead_has_ingredients_mead1_idx` (`mead_id` ASC, `mead_brewmasterid` ASC),
  CONSTRAINT `fk_mead_has_ingredients_mead1`
    FOREIGN KEY (`mead_id` , `mead_brewmasterid`)
    REFERENCES `mymead`.`mead` (`id` , `brewmasterid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_mead_has_ingredients_ingredients1`
    FOREIGN KEY (`ingredients_id`)
    REFERENCES `mymead`.`ingredients` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;